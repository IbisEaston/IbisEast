<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Ibiseast by IbisEaston</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Ibiseast</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/IbisEaston/IbisEast" class="btn">View on GitHub</a>
      <a href="https://github.com/IbisEaston/IbisEast/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/IbisEaston/IbisEast/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="ibiseast" class="anchor" href="#ibiseast" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>IbisEast</h1>

<p></p>
    200m
    
    
    
    
    
    
    
    

<pre><code>&lt;meta property="og:title" content="200ｍ radius circles"&gt;
&lt;meta property="og:description" content="Double-tap to draw 200m radius circle for catching Pokemon. Long-tap to clear existing circles."&gt;
&lt;meta property="og:type" content="website"&gt;
&lt;meta property="og:url" content="https://IbisEaston.github.io/200m/"&gt;
&lt;meta property="og:image" content="https://IbisEaston.github.io/200m/200m_ss.png"&gt;
&lt;meta property="fb:app_id" content="1659170097660873"&gt; 

&lt;meta name="twitter:card" content="summary_large_image"&gt;
&lt;meta name="twitter:image" content="https://IbisEaston.github.io/200m/200m_ss.png"&gt;
&lt;meta name="twitter:title" content="200m radius circles for Pokemon GO"&gt;
&lt;meta name="twitter:description" content="Double-tap to draw 200m radius circle for catching Pokemon. Long-tap to clear existing circles."&gt;
&lt;meta name="twitter:site" content="@Ibis"&gt;





&lt;link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.css"&gt;
&lt;script src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.js"&gt;&lt;/script&gt;

&lt;style&gt;
    body {
        padding: 0;
        margin: 0;
    }
    html, body, #map {
        height: 100%;
    }
&lt;/style&gt;
</code></pre>

<p>
</p>
    <div id="map" tabindex="0">
<div>
<div><div><div>
<img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58234/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58234/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58235/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58233/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58235/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58233/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58234/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58234/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58233/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58235/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58235/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58233/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58236/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58232/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58232/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58236/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58232/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58236/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58236/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58232/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58237/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58237/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58231/25809.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58231/25810.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58231/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58231/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58237/25808.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw"><img alt="" src="https://api.tiles.mapbox.com/v4/mapbox.streets/16/58237/25811.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw">
</div></div></div>
<div><img src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/images/marker-shadow.png"></div>
<div></div>
<div><img src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/images/marker-icon.png" tabindex="0"></div>
<div></div>
<div></div>
<div></div>
</div>
<div>
<div><div>
<a href="#" title="Zoom in">+</a><a href="#" title="Zoom out">-</a>
</div></div>
<div></div>
<div></div>
<div><div>
<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>
</div></div>
</div>
</div>

<pre><code>&lt;script&gt;
    var latestLocation = null;
    var latestCircleLatLng = null;

    var centerCircle = null;
    var centerPin = null;
    var centerCircleRadius = 40;

    var searchCircleRadius = 100;
/*
    var searchCircleStyle = {
        weight: 1,
        color: '#0000ff',
        fillColor: '#ccccff',
        fillOpacity: 0.1
    };
*/
    var searchCircleCount = 0;
    var searchCircleStyle = function(){
        var searchCircleColor;
        if(searchCircleCount == 0){
            searchCircleColor = '#00cc00';
            searchFillColor = '#88cc88';
            searchFillOpacity = '0.2';
        }
        else if(searchCircleCount == 1){
            searchCircleColor = '#ffcc00';
            searchFillColor = '#ffcc00';
            searchFillOpacity = '0.0';
        }
        else if(searchCircleCount == 2){
            searchCircleColor = '#ff4400';
            searchFillColor = '#ff4400';
            searchFillOpacity = '0.0';
        }
        else if(searchCircleCount == 3){
            searchCircleColor = '#0044ff';
            searchFillColor = '#0044ff';
            searchFillOpacity = '0.0';
        }
        else{
            searchCircleColor = '#444444';
            searchFillColor = '#444444';
            searchFillOpacity = '0.0';
        }
        return {
            weight: 4,
            color: searchCircleColor,
            fillColor: searchFillColor,
            fillOpacity: searchFillOpacity
        };
    }

    var map = L.map('map');
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiaW51cm8iLCJhIjoiY2lycXdrZHllMGdzeXQybmsyc2JmaHlqcCJ9.fFTwIuK3ERkV5_WwQWL2vw', {
        maxZoom: 18,
        attribution: 'Map data &amp;copy; &lt;a href="http://openstreetmap.org"&gt;OpenStreetMap&lt;/a&gt; contributors, ' +
            '&lt;a href="http://creativecommons.org/licenses/by-sa/2.0/"&gt;CC-BY-SA&lt;/a&gt;, ' +
            'Imagery © &lt;a href="http://mapbox.com"&gt;Mapbox&lt;/a&gt;',
        id: 'mapbox.streets'
    }).addTo(map);



    //location event handler
    function onLocationFound(e) {
        //after 1st location found, disable setView
        if(!latestLocation){
            map.setView(e.latlng, 16);
        }

        //prevent same location
        if(latestLocation == e.latlng){
            return;
        }

        latestLocation = e.latlng;
    //  var locationRadius = e.accuracy / 2;

        if(!centerCircle){
            centerCircle = L.circle(latestLocation, centerCircleRadius, {
                weight: 4,
                color: 'pink',
                fillColor: '#ffcccc',
                fillOpacity: 0.2
            });
            centerCircle.addTo(map);
        }
        centerCircle.setLatLng(latestLocation);
    //  centerCircle.setRadius(locationRadius);

        if(!centerPin){
            centerPin = L.marker(e.latlng).addTo(map);
        }
        centerPin.setLatLng(latestLocation);
        centerPin.bindPopup(latestLocation.toString());
    }

    function onLocationError(e) {
        console.log(e);
        alert(e.message);
    }

    var circles = [];
    var KEY_CIRCLES = 'circles';
    function addCircle(latlng, radius, options) {
        var circle = L.circle(latlng, radius, options);
        circle.addTo(map);
        circles.push(circle);
        latestCircleLatLng = latlng;
        searchCircleCount++;

        // Update circles data in localStorage
        var data = [];
        circles.forEach(function (circle) {
            data.push([circle.getLatLng(), circle.getRadius(), circle.options]);
        });
        localStorage.setItem(KEY_CIRCLES, JSON.stringify(data));
    }

    function onMapDblclick(e){
        if(latestCircleLatLng != latestLocation){
            addCircle(latestLocation, searchCircleRadius, searchCircleStyle());
        }
    }

    function onMapTapHold() {
        circles.forEach(function (circle) {
            circle.removeFrom(map);
        });
        circles = [];
        searchCircleCount = 0;
        localStorage.removeItem(KEY_CIRCLES);
        latestCircleLatLng = null;
    }

    var timerId;
    function clearTimer() {
        clearTimeout(timerId);
    }
    map.on('mouseup', clearTimer);
    map.on('dragstart', clearTimer);
    map.on('zoomstart', clearTimer);

    map.on('mousedown', function () {
        timerId = setTimeout(onMapTapHold, 1000);
    });

    //continuous watching location
//  map.on('locationfound', onLocationFound);
//  map.on('locationerror', onLocationError);
    map.locate({
        setView: false, 
        watch: true, 
        enableHighAccuracy: true,
        maximumAge: 0, 
        timeout: 3000000
    })
    map.on('locationfound', onLocationFound);
    map.on('locationerror', onLocationError);
    map.doubleClickZoom.disable();
    map.on('dblclick', onMapDblclick);

    function initialize() {
        // Initialize circles by localStorage data
        var circles = JSON.parse(localStorage.getItem(KEY_CIRCLES));
        if (circles === null) return;

        circles.forEach(function (circle) {
            addCircle.apply(this, circle);
        });
    }
    map.on('load', initialize);
&lt;/script&gt;
</code></pre>

<p></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/IbisEaston/IbisEast">Ibiseast</a> is maintained by <a href="https://github.com/IbisEaston">IbisEaston</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
